# 메모리 정책 (Memory Policy)

> 모든 에이전트에게 적용되는 메모리 관리 규칙.

## 1. 메모리 구조

```
agents/{ID}/memory/
├── short_term/     ← 현재 세션 대화·작업 맥락 (휘발성)
├── long_term/      ← 검증된 학습 결과·패턴 (영구)
└── compressed/     ← 요약 아카이브 (용량 절약)
```

## 2. 요약 압축 규칙

- **트리거**: short_term/ 토큰이 4,000을 초과하면 자동 요약.
- **요약 방법**: 핵심 결정사항 + 결과 + 오류만 추출하여 1/4 이하로 압축.
- **저장**: compressed/{timestamp}_summary.json 형식으로 저장.
- **원본**: 요약 후 short_term/의 원본은 삭제 가능.

## 3. 장기 메모리 저장 조건

장기 메모리에 저장하려면 아래 조건을 **모두** 충족해야 한다:
1. 작업이 성공적으로 완료됨
2. 재사용 가능한 패턴 또는 학습이 포함됨
3. 검증된 데이터임 (추정·미확인 데이터 저장 금지)

## 4. 용량 제한

- 에이전트당 총 스토리지: **100MB**
- short_term: 최대 **4,000 토큰** (초과 시 압축)
- long_term: 최대 **50MB**
- compressed: 최대 **50MB** (초과 시 가장 오래된 항목부터 삭제)

## 5. 금지사항

- 검증되지 않은 데이터를 long_term에 저장하지 마라.
- 다른 에이전트의 memory/에 접근하지 마라.
- 로그(logs/)를 memory로 사용하지 마라 — 로그와 메모리는 별개 시스템이다.
